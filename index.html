<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>泰時刻 THAISKR - 愛泰人士的文化基地</title>
    
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 引入 Google Fonts - Noto Sans TC (近似源柔黑體) & Oswald (近似 Agrandir Narrow) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Oswald:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- 自訂樣式 -->
    <style>
        /* 應用字體與基本樣式 */
        body {
            font-family: 'Noto Sans TC', sans-serif;
            color: #592E3D; /* text-dark-brown */
            background-color: #FFFCF5; /* A very light beige background */
        }

        /* 英文標題使用 Oswald 字體 */
        h1, h2, h3, h4, h5, h6, .font-eng {
            font-family: 'Oswald', 'Noto Sans TC', sans-serif;
        }
        
        /* 頁面切換效果 */
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
        
        /* 導覽列固定與陰影 */
        header {
            position: sticky;
            top: 0;
            z-index: 50;
            background-color: rgba(255, 252, 245, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        /* AI 介紹內容的顯示/隱藏動畫 */
        .ai-notes-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, margin-top 0.5s ease-in-out;
        }
        .ai-notes-content.show {
            max-height: 1000px; /* A large enough value */
            margin-top: 1rem;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header / Navigation Bar -->
    <header class="w-full shadow-md">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="font-eng text-2xl font-bold tracking-wider nav-link" data-target="home">泰時刻 THAISKR</a>
            <nav class="hidden md:flex space-x-8 items-center">
                <a href="#services" class="hover:text-[#F0725C] transition duration-300">我的服務</a>
                <a href="#" class="hover:text-[#F0725C] transition duration-300 nav-link" data-target="all-products">泰時刻的書櫃子賣場</a>
                <a href="#" class="hover:text-[#F0725C] transition duration-300 nav-link" data-target="courses">泰語課程</a>
                <a href="#about" class="hover:text-[#F0725C] transition duration-300">關於我</a>
                <a href="#contact" class="hover:text-[#F0725C] transition duration-300">聯絡我</a>
            </nav>
            <button id="mobile-menu-button" class="md:hidden">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-4 6h4" />
                </svg>
            </button>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
            <a href="#services" class="block py-2 hover:text-[#F0725C]">我的服務</a>
            <a href="#" class="block py-2 hover:text-[#F0725C] nav-link" data-target="all-products">泰時刻的書櫃子賣場</a>
            <a href="#" class="block py-2 hover:text-[#F0725C] nav-link" data-target="courses">泰語課程</a>
            <a href="#about" class="block py-2 hover:text-[#F0725C]">關於我</a>
            <a href="#contact" class="block py-2 hover:text-[#F0725C]">聯絡我</a>
        </div>
    </header>

    <!-- Main Content Area -->
    <main id="main-content">
        
        <!-- ======================= -->
        <!--      首頁內容 (Home)     -->
        <!-- ======================= -->
        <div id="home" class="page active">
            <!-- Hero Section -->
            <section class="h-screen min-h-[600px] bg-cover bg-center flex items-center" style="background-image: url('https://images.unsplash.com/photo-1528181304800-259b08848526?q=80&w=2070&auto=format&fit=crop');">
                <div class="bg-black bg-opacity-40 w-full h-full flex items-center justify-center">
                    <div class="text-center text-white p-8">
                        <h1 class="font-eng text-5xl md:text-7xl font-bold tracking-widest">泰時刻 THAISKR</h1>
                        <p class="mt-4 text-xl md:text-2xl">愛泰人士的文化基地</p>
                        <a href="#services" class="mt-8 inline-block bg-[#F0725C] hover:bg-[#E0644C] text-white font-bold py-3 px-8 rounded-lg text-lg transition-colors">探索我的服務</a>
                    </div>
                </div>
            </section>

            <!-- About Me Section -->
            <section id="about" class="py-20 bg-white">
                <div class="container mx-auto px-6 text-center">
                    <h2 class="text-4xl font-bold mb-12">關於我</h2>
                    <div class="flex flex-col md:flex-row items-center justify-center gap-12">
                        <img src="https://placehold.co/300x300/F2834D/592E3D?text=Kru+Jane" alt="Kru Jane 的照片" class="w-48 h-48 md:w-60 md:h-60 rounded-full object-cover shadow-lg">
                        <p class="max-w-2xl text-lg leading-relaxed text-left">
                            嗨！我是 Kru Jane。創立「泰時刻」是希望將我對泰國文化的熱愛，分享給在台灣的每一個你。<br><br>
                            這裡不只是一個商店，更是一個有溫度的文化交流空間，希望能為你的生活，帶來一絲來自泰國的陽光。
                        </p>
                    </div>
                </div>
            </section>

            <!-- Services Section -->
            <section id="services" class="py-20 bg-[#FAC191]">
                <div class="container mx-auto px-6">
                    <h2 class="text-4xl font-bold text-center mb-12">我的三大核心服務</h2>
                    <div class="grid md:grid-cols-3 gap-8">
                        <!-- Service 1: Bookstore -->
                        <div class="bg-white p-8 rounded-lg shadow-lg text-center flex flex-col">
                            <h3 class="text-2xl font-bold mb-4">泰時刻的書櫃子</h3>
                            <p class="mb-6 flex-grow">為您精心挑選泰國直送的書籍、充滿設計感的文創小物與特色服飾。</p>
                            <a href="https://myship.7-11.com.tw/general/detail/GM2409123235798" target="_blank" class="inline-block bg-[#F0725C] hover:bg-[#E0644C] text-white font-bold py-2 px-6 rounded-lg transition-colors">前往賣貨便賣場訂購</a>
                        </div>
                        <!-- Service 2: Fun Thai Learning -->
                        <div class="bg-white p-8 rounded-lg shadow-lg text-center flex flex-col">
                            <h3 class="text-2xl font-bold mb-4">有趣點子學泰語</h3>
                            <p class="mb-6 flex-grow">這是一個互動學習專區，我正在開發一個能讓您直接在網頁上練習泰語的 AI 工具！敬請期待。</p>
                        </div>
                        <!-- Service 3: 1-on-1 Courses -->
                        <div class="bg-white p-8 rounded-lg shadow-lg text-center flex flex-col">
                            <h3 class="text-2xl font-bold mb-4">泰語一對一課程</h3>
                            <p class="mb-6 flex-grow">由創辦人 Kru Jane 親自授課，課程涵蓋【初級會話】、【初中級會話】與【泰文字母&規則】。</p>
                            <a href="#" class="inline-block bg-[#F0725C] hover:bg-[#E0644C] text-white font-bold py-2 px-6 rounded-lg transition-colors nav-link" data-target="courses">查看課程詳情</a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Featured Products Section -->
            <section id="featured-products" class="py-20 bg-white">
                <div class="container mx-auto px-6">
                    <h2 class="text-4xl font-bold text-center mb-12">熱銷推薦</h2>
                    <div id="featured-products-container" class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                        <!-- Product cards will be inserted here by JavaScript -->
                    </div>
                     <div class="text-center mt-12">
                        <a href="#" class="inline-block bg-[#43857A] hover:bg-[#3A756A] text-white font-bold py-3 px-8 rounded-lg text-lg transition-colors nav-link" data-target="all-products">瀏覽賣場所有商品</a>
                    </div>
                </div>
            </section>
            
            <!-- Contact Section -->
            <section id="contact" class="py-20 bg-[#898A4D]">
                <div class="container mx-auto px-6 text-center text-white">
                    <h2 class="text-4xl font-bold mb-6">追蹤我，發現更多泰國大小事！</h2>
                    <a href="https://www.instagram.com/thaiskrthai/" target="_blank" class="inline-block bg-white p-4 rounded-full shadow-lg transition transform hover:scale-110">
                        <svg class="w-10 h-10 text-[#592E3D]" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.85s.011-3.584.069-4.85c.149-3.225 1.664-4.771 4.919 4.919 1.266-.058 1.644-.07 4.85-.07zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072s3.667-.014 4.947-.072c4.358-.2 6.78-2.618 6.98-6.98.059-1.281.073-1.689.073-4.948s-.014-3.667-.072-4.947c-.2-4.358-2.618-6.78-6.98-6.98-1.281-.059-1.689-.073-4.948-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4s1.791-4 4-4 4 1.79 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.441 1.441 1.441 1.441-.645 1.441-1.441-.645-1.44-1.441-1.44z"/>
                        </svg>
                    </a>
                </div>
            </section>
        </div>

        <!-- =========================== -->
        <!--      所有商品頁面 (All Products)     -->
        <!-- =========================== -->
        <div id="all-products" class="page p-8 md:p-16">
            <h1 class="text-4xl font-bold text-center mb-4">泰時刻的書櫃子賣場</h1>
            <p class="text-center text-lg mb-12">所有商品皆由 7-11 賣貨便系統處理訂單與寄送。<br>若賣場無貨，請私訊@thaiskrthai，將於下個月訂購</p>
            <!-- Filter Section -->
            <div id="filter-container" class="mb-8 flex flex-wrap justify-center gap-2 md:gap-4">
                <!-- Filter buttons will be inserted here -->
            </div>
            <div id="all-products-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8">
                <!-- All product cards will be inserted here by JavaScript -->
            </div>
        </div>

        <!-- =========================== -->
        <!--      泰語課程頁面 (Courses)     -->
        <!-- =========================== -->
        <div id="courses" class="page p-8 md:p-16 bg-white">
            <div class="container mx-auto">
                <h1 class="text-4xl font-bold text-center mb-12">泰語一對一課程</h1>
                <div class="bg-white rounded-lg shadow-xl p-8 md:p-12">
                     <!-- Teacher Intro -->
                    <div class="flex flex-col md:flex-row items-center gap-8 mb-12">
                        <img src="https://placehold.co/400x400/F0725C/FFFFFF?text=Kru+Jane" alt="Kru Jane 的照片" class="w-40 h-40 rounded-full object-cover">
                        <div>
                            <h2 class="text-3xl font-bold mb-2">教師簡介：Kru Jane</h2>
                            <p class="text-lg leading-relaxed">我的教學理念是營造一個輕鬆、無壓力的學習氛圍，讓學生敢於開口、樂於練習。我會結合大量生活化的情境與有趣的文化分享，讓學泰語不只是背單字，而是一場有趣的文化探索之旅。</p>
                        </div>
                    </div>
                    
                    <!-- Course Offerings -->
                    <h2 class="text-3xl font-bold text-center mb-8">課程方案</h2>
                    <div class="space-y-8">
                        <!-- Course 1 -->
                        <div class="border-l-4 border-[#F0725C] bg-[#FFF7F5] p-6 rounded-r-lg">
                            <h3 class="text-2xl font-bold mb-2">【初級會話-講義使用泰文字搭配英文拼音】</h3>
                            <p class="text-md">20單元，從旅遊角度出發，大量口說練習，讓你快速上手基本句型，適合零基礎學員。</p>
                        </div>
                        <!-- Course 2 -->
                        <div class="border-l-4 border-[#F2834D] bg-[#FFF7F5] p-6 rounded-r-lg">
                            <h3 class="text-2xl font-bold mb-2">【初中級會話-講義使用泰文字搭配英文拼音】</h3>
                            <p class="text-md">20單元，需完成初級課程。強化句構句型，融入泰劇、流行梗等多元內容，讓會話更道地。</p>
                        </div>
                        <!-- Course 3 -->
                        <div class="border-l-4 border-[#43857A] bg-[#FFF7F5] p-6 rounded-r-lg">
                            <h3 class="text-2xl font-bold mb-2">【泰文字母&規則】</h3>
                            <p class="text-md">帶你識讀泰文字母、搞懂音調規則，並傳授手機鍵盤使用技巧，讓你看到泰文不再驚慌！</p>
                        </div>
                    </div>

                    <!-- Call to Action -->
                    <div class="text-center mt-16">
                        <h2 class="text-2xl font-bold mb-4">有興趣學習嗎？</h2>
                        <div class="flex flex-col md:flex-row justify-center items-center gap-4">
                            <a href="https://tw.amazingtalker.com/teachers-and-tutors/thaiskr-thai?page=1&from_tutors_page&language=thai" target="_blank" class="bg-[#F0725C] hover:bg-[#E0644C] text-white font-bold py-3 px-8 rounded-lg text-lg w-full md:w-auto transition-colors">前往 AmazingTalker 預約課程</a>
                            <a href="https://www.instagram.com/thaiskrthai/" target="_blank" class="bg-[#43857A] hover:bg-[#3A756A] text-white font-bold py-3 px-8 rounded-lg text-lg w-full md:w-auto transition-colors">透過 Instagram 私訊諮詢</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>
    
    <!-- Image Modal -->
    <div id="image-modal" class="fixed inset-0 bg-black bg-opacity-75 z-[100] hidden items-center justify-center p-4">
        <div class="relative max-w-4xl max-h-[90vh] bg-white rounded-lg shadow-lg">
            <img id="modal-image" src="" alt="Enlarged product image" class="object-contain max-w-full max-h-[90vh]">
            <button id="close-modal" class="absolute -top-4 -right-4 bg-white rounded-full p-2 text-gray-800 hover:bg-gray-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
    </div>
    
    <footer class="bg-[#592E3D] text-white py-8">
        <div class="container mx-auto px-6 text-center">
            <p>© 2025 泰時刻 THAISKR. All Rights Reserved.</p>
        </div>
    </footer>


    <script>
        // ===========================
        //      商品資料庫 (Product Data)
        // ===========================
        // **警告：此處資料已完全根據 supabase_products_final_v2.csv 檔案重新生成**
        const products = [
  {
    "handle": "prod_0001",
    "name": "Bangkok Shophouses",
    "description": "插畫介紹曼谷老城區建築的歷史文化。",
    "instock_price": 870,
    "book_type": "泰國藝文書籍",
    "image_url_cover": "https://drive.google.com/file/d/16ejqWaDbbY1SBHeGdXejsmwo8VLo1WKu/view?usp=drive_link",
    "image_url_1": "https://drive.google.com/file/d/1viV7boPHmjoazvMxu6jFjZ_-XYOlfS1A/view?usp=drive_link",
    "image_url_2": "",
    "is_bestseller": true,
    "specification": "泰英",
    "ai_notes": "這是一本獻給曼谷經典建築「店屋 (Shophouse)」的畫作集。作者 Louis Sketcher 透過細膩的鉛筆素描、鋼筆畫和水彩，捕捉了這些兼具商業與居住功能的老建築獨特的歷史風貌與文化底蘊。\n\n本書不僅僅是建築的寫生，更是對曼谷舊城區鄰里生活的溫情紀錄。書中以泰英雙語呈現，帶領讀者穿梭於曼谷迷宮般的巷弄，探索從老城中心到昭披耶河對岸的店屋故事。您會看到印度區、華人貿易中心、批發市場以及那些隱藏在尋常巷弄中的精緻建築細節，如窗飾、木雕和陽台上的鐵花窗。對於喜愛城市漫遊、建築美學和想從不同視角體驗曼谷的讀者來說，這是一本值得收藏的靈感之書。\n\n本書特點：\n\n主題： 曼谷店屋建築、街區文化與生活。\n\n形式： 精裝本，全彩印刷，收錄大量手繪插畫。\n\n語言： 泰英雙語。"
  },
  {
    "handle": "prod_0002",
    "name": "Moments in Chiang Mai",
    "description": "插畫介紹清邁美食與建築。",
    "instock_price": 870,
    "book_type": "泰國藝文書籍",
    "image_url_cover": "https://drive.google.com/file/d/1v8UF16dPuECYdYN_qpwPe0WwwB95AGzm/view?usp=drive_link",
    "image_url_1": "https://drive.google.com/file/d/1HAh6d8-YlL9YQ_UG5P7c2XgFonIziyFT/view?usp=drive_link",
    "image_url_2": "",
    "is_bestseller": true,
    "specification": "泰英",
    "ai_notes": "繼《Bangkok Shophouses》之後，作者 Louis Sketcher 將他的畫筆轉向了泰北玫瑰——清邁。這本書同樣以他標誌性的手繪風格，記錄下在清邁的所見所聞與迷人瞬間。\n\n從書名的「Moments (瞬間)」可以看出，本書更側重於捕捉作者在清邁的個人體驗與第一印象。內容涵蓋了清邁獨特的飲食文化、蘭納風格的建築、別具一個的方言以及悠閒清新的自然氛圍。透過作者的畫筆和文字，讀者可以感受到一位旅人對這座城市的深厚情感，從初次到訪的青澀大學生，到帶著畫具和速寫本一次次重遊的藝術家。書中同樣以泰英雙語呈現，讓不同語言的讀者都能一同感受清邁的魅力。\n\n本書特點：\n\n主題： 清邁的旅行印象、建築、文化與自然風光。\n\n形式： 精裝本，以手繪插畫和散記為主。\n\n語言： 泰英雙語。"
  },
  {
    "handle": "prod_0003",
    "name": "365 DAYS OF THAI URBAN MESS ARCHITECTURE",
    "description": "泰國街頭建築物件的設計。\n雖然媽媽說那裡太危險 推薦",
    "instock_price": 445,
    "book_type": "泰國藝文書籍",
    "image_url_cover": "https://drive.google.com/file/d/14MwEA5DNGwmVCp1FzfS4pj1LhECq9lHS/view?usp=drive_link",
    "image_url_1": "https://drive.google.com/file/d/1B4IIVOctw798rgxwoR88WRuG4ziW46VY/view?usp=drive_link",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "泰",
    "ai_notes": "這是一本視角極為獨特的建築與社會觀察書籍。書名中的「Mess Architecture」直譯為「混亂的建築」，而泰文副標題「สถาปัตยกรรมคณะเรี่ยราด」更帶有一種戲謔的意味，巧妙地將「คณะราษฎร (人民黨)」置換為「คณะเรี่ยราด (雜亂無章)」。\n\n作者 Chatchavan Suwansawat 是一位建築師，他將目光從宏偉的紀念碑式建築移開，轉而聚焦於泰國城市中由普通人為了應對日常生活需求而「設計」出來的物件與空間。書中記錄了他在365天裡觀察到的各種城市景象：臨時搭建的攤販、被隨意改造的遮雨棚、奇特的管線佈局等。這些看似混亂、不入流的「設計」，卻真實地反映了都市中不平等的居住環境與泰國特有的在地生活智慧。\n\n本書挑戰了傳統建築學的定義，引導讀者思考什麼才是真正的「建築」，並從這些常被社會忽視的細節中，看見混亂中共存的生命力與獨特的城市紋理。\n\n本書特點：\n\n主題： 泰國都市的「非典型」建築、常民設計與社會觀察。\n\n形式： 收錄大量紀實照片與評論性文字。\n\n核心概念： 透過「混亂」看見真實的都市生活與民間智慧。"
  },
  {
    "handle": "prod_0004",
    "name": "漢泰小辭典",
    "description": "中泰單字口袋書。",
    "instock_price": 215,
    "book_type": "泰語雙語學習書",
    "image_url_cover": "https://drive.google.com/file/d/13RWt_6KjYW2X9EMED-hILdczflCA7XMv/view?usp=drive_link",
    "image_url_1": "https://drive.google.com/file/d/18FtoYx8z99VreYiBDRAKbxHk8EqTV3ik/view?usp=drive_link",
    "image_url_2": "",
    "is_bestseller": true,
    "specification": "泰中",
    "ai_notes": ""
  },
  {
    "handle": "prod_0005",
    "name": "หนังสือ 1000 คำศัพท์ภาษาจีนสำหรับเด็ก",
    "description": "泰國小朋友學中文的書，看得懂泰文的人也可以讀看看，有精美插畫和各種生活主題。",
    "instock_price": 330,
    "book_type": "泰語雙語學習書",
    "image_url_cover": "https://drive.google.com/file/d/1kCkFGZoqvKY7ic2Y9XCxu_if6mPuyRDK/view?usp=drive_link",
    "image_url_1": "https://drive.google.com/file/d/1h70fl6GpCfWQuDnxDS7_R2fpbwA0OCDe/view?usp=drive_link",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "泰英",
    "ai_notes": "這是專為泰國兒童設計的中文啟蒙詞彙書，由泰國知名的教育圖書出版社（如 MIS Publishing）發行。\n\n目標讀者： 正在初學中文的泰國兒童。\n\n核心內容： 精選1000個最基礎、最貼近兒童生活的中文詞彙。\n\n主要特點：\n\n主題分類： 內容通常會按照主題分類，例如「身體」、「家庭」、「動物」、「食物」、「交通工具」等，幫助孩子系統性記憶。\n\n圖文並茂： 每一頁都有色彩鮮豔、生動可愛的插圖，用圖像來對應詞彙，加深孩子的記憶。\n\n三語標示： 書中每個詞彙都會包含 中文漢字、拼音 和 泰文翻譯，讓家長或老師能輕鬆引導。\n\n這是一本典型的「寓教於樂」型童書，旨在透過有趣的視覺和聽覺體驗，引發孩子學習中文的興趣。"
  },
  {
    "handle": "prod_0006",
    "name": "50 short stories: only in thailand",
    "description": "這本非常有趣! 推! 50個短故事\n用非常口語的泰文幽默講述泰國生活的事。",
    "instock_price": 450,
    "book_type": "泰語雙語學習書",
    "image_url_cover": "https://drive.google.com/file/d/1itTtmKpQb-r5bfzY-IBIYmHHueYMvayN/view?usp=drive_link",
    "image_url_1": "https://drive.google.com/file/d/16gTRmhlWh57af4icWRYlfjY01LiUoIx4/view?usp=drive_link",
    "image_url_2": "https://drive.google.com/file/d/1fLdOz_H1FKlk3GPJrIj3WMHRz3hg04IW/view?usp=drive_link",
    "is_bestseller": true,
    "specification": "泰英",
    "ai_notes": "專門搜羅泰國獨有的奇聞軼事、社會文化現象、網路熱門話題或都市傳說。內容非常接地氣，對於泰國讀者來說既親切又有趣。例如，可能會讀到關於泰國特殊交通狀況、奇特的信仰或是一些讓人會心一笑的本地新聞。"
  },
  {
    "handle": "prod_0007",
    "name": "50 short stories: life lessons inspiring stories",
    "description": "50個短故事同一系列作者新書，以人生議題為主。",
    "instock_price": 433,
    "book_type": "泰語雙語學習書",
    "image_url_cover": "https://drive.google.com/file/d/1GWPOvDYJH8Q3qjHqfVSnB6z2OXs-5ibp/view?usp=drive_link",
    "image_url_1": "",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "泰英",
    "ai_notes": "彙集了世界各地的寓言、名人勵志小故事、感人肺腑的真實事件或富含哲理的民間傳說。旨在傳遞正面價值觀，例如勇氣、誠實、毅力與愛。讀者在學習英文的同時，也能從中獲得人生的啟發。"
  },
  {
    "handle": "prod_0008",
    "name": "50 short stories: mysteries around the world",
    "description": "50個短故事同一系列作者新書，以神秘故事為主題。",
    "instock_price": 433,
    "book_type": "泰語雙語學習書",
    "image_url_cover": "https://drive.google.com/file/d/1kfZoPBhG0N6bbT_fAhBwIrvP-AZHM6sA/view?usp=drive_link",
    "image_url_1": "",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "泰英",
    "ai_notes": "內容圍繞著全球著名的未解之謎、神秘事件和超自然現象。例如百慕達三角、不明飛行物(UFO)、尼斯湖水怪、古文明之謎等。這個主題非常能吸引讀者的好奇心，讓學習過程像在看一本科普或冒險故事書一樣引人入勝。"
  },
  {
    "handle": "prod_0009",
    "name": "สัญญานะว่าจะยิ้มให้กับตัวเอง\n約定好，要為自己而笑",
    "description": "Mindy老師推薦!\n溫暖療癒的書籍，泰文密度不高，適合閱讀新手。",
    "instock_price": 390,
    "book_type": "泰語短篇書籍",
    "image_url_cover": "https://drive.google.com/file/d/1Dtb4zXhbhLAmtHvtSy69HtQcU1xjZld1/view?usp=drive_link",
    "image_url_1": "https://drive.google.com/file/d/1BcNQIBkE0RxHQZf48mUIl92nw52gMjJr/view?usp=drive_link",
    "image_url_2": "",
    "is_bestseller": true,
    "specification": "泰",
    "ai_notes": ""
  },
  {
    "handle": "prod_0010",
    "name": "อย่าลืมหยอดรอยยิ้มใส่กระปุก แล้วพกความสุขใส่กระเป๋า\n別忘了把微笑存進撲滿，然後把幸福裝進口袋",
    "description": "前面這本作者的新書，內容也好閱讀。",
    "instock_price": 390,
    "book_type": "泰語短篇書籍",
    "image_url_cover": "https://drive.google.com/file/d/1aOWYKXqylTM3dl6rzjR-JREcFdDQ3HSx/view?usp=drive_link",
    "image_url_1": "",
    "image_url_2": "",
    "is_bestseller": true,
    "specification": "泰",
    "ai_notes": ""
  },
  {
    "handle": "prod_0011",
    "name": "quotes to you",
    "description": "Freen去馬爾地夫看的書。",
    "instock_price": 600,
    "book_type": "泰語短篇書籍",
    "image_url_cover": "https://drive.google.com/file/d/1nWOECysGLqDyhzDKVfHTg33NMxpaU6hU/view?usp=drive_link",
    "image_url_1": "https://drive.google.com/file/d/1LNOslTuuLi_d9WBqgdcQQLfl6QTDksat/view?usp=drive_link",
    "image_url_2": "",
    "is_bestseller": true,
    "specification": "泰",
    "ai_notes": ""
  },
  {
    "handle": "prod_0012",
    "name": "ทุกวันคือของขวัญจากตัวเอง\n每一天，都是自己給的禮物",
    "description": "有366天，每天一頁短篇，適合給想開始練習短文閱讀的泰語學習者。",
    "instock_price": 480,
    "book_type": "泰語短篇書籍",
    "image_url_cover": "https://drive.google.com/file/d/1gEVIxbOlY52L708okopnatH-LSKZuEB7/view?usp=drive_link",
    "image_url_1": "https://drive.google.com/file/d/1lPAsRUZYy9H2BDOefaayuGF0peVAJ03G/view?usp=drive_link",
    "image_url_2": "",
    "is_bestseller": true,
    "specification": "泰",
    "ai_notes": ""
  },
  {
    "handle": "prod_0013",
    "name": "ถ้าโลกมันแย่ก็แค่คิดแบบคาปิบาร่า\n如果世界很糟，就學水豚思考吧",
    "description": "和capybara一家人換個角度思考生活小煩惱，雖然頁數多，但用詞不難，適合閱讀新手。",
    "instock_price": 610,
    "book_type": "泰語短篇書籍",
    "image_url_cover": "https://drive.google.com/file/d/1P0qdiNukXCnaP7VOsUb19CCKwhVm4S0f/view?usp=drive_link",
    "image_url_1": "https://drive.google.com/file/d/1VqMo4ysl13fHn5A0qt0fgFLbVpoSrQ48/view?usp=drive_link",
    "image_url_2": "",
    "is_bestseller": true,
    "specification": "泰",
    "ai_notes": "這本書的概念非常現代，結合了時下的網路文化。水豚 (Capybara) 在網路上是「情緒穩定、與世無爭」的代名詞，牠們總是一副極度淡定、悠然自得的模樣。\n所以，這本書想傳達的核心是：當你覺得生活一團亂、世界讓你失望時，不妨學學水豚的「淡定哲學」——放鬆下來，接受現實，保持內心平靜，不讓外界的紛擾過度影響自己。這是一種充滿趣味的「鬆弛感」生活提案。"
  },
  {
    "handle": "prod_0014",
    "name": "กว่าผมจะตื่น เธอก็คงไปดูแมวห้องคนอื่นเสียแล้ว\n等我醒來，你就大概去看其他房間裡的貓了",
    "description": "- 透過貓的視角或與貓的互動，反思生活中的哲理\n- 每篇可能只有三到四行，但句子難易度落差大\n- 貓奴可能會喜歡555",
    "instock_price": 425,
    "book_type": "泰語短篇書籍",
    "image_url_cover": "https://drive.google.com/file/d/140KyWQ5XSKPS7VI6fxaahlvqq0usdr9X/view?usp=drive_link",
    "image_url_1": "https://drive.google.com/file/d/1LiXTbL1_3N4iiin7Cy-sqw305zAcxJia/view?usp=drive_link",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "泰",
    "ai_notes": ""
  },
  {
    "handle": "prod_0015",
    "name": "（黑貓封面）กว่าผมจะตื่น เธอก็คงไปดูแมวห้องคนอื่นเสียแล้ว\n等我醒來，你就大概去看其他房間裡的貓了",
    "description": "",
    "instock_price": 425,
    "book_type": "泰語短篇書籍",
    "image_url_cover": "https://drive.google.com/file/d/1EPwITM8mKew3Am4sWj6d8QHtDxI6F40r/view?usp=drive_link",
    "image_url_1": "",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "泰",
    "ai_notes": ""
  },
  {
    "handle": "prod_0016",
    "name": "貓貓書（黑貓）แมวยิ้มง่ายใช่ว่าแตกสลายไม่เป็น บทสนทนาว่าด้วยรอยขีดข่วนของยุคสมัย\n貓咪笑得容易，不代表不會心碎。",
    "description": "",
    "instock_price": 430,
    "book_type": "泰語短篇書籍",
    "image_url_cover": "https://drive.google.com/file/d/16Xv7P-16RQ9lGmHaBS-aMSN-sqF1ItKE/view?usp=drive_link",
    "image_url_1": "",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "泰",
    "ai_notes": "這本書的層次更為深刻。作者以「愛笑的貓咪」比喻那些在生活中總是展現開朗、堅強一面的人們，但笑容背後，可能隱藏著不為人知的脆弱與疲憊（「不代表不會心碎」）。書中透過貓咪的視角，觀察和反思現代社會帶給人們的無形壓力、焦慮與倦怠（「時代的刮痕」）。內容觸及了資本主義下的比較文化、對成功的定義、以及在快節奏生活中如何尋找喘息空間。這是一本非常能引起年輕世代共鳴的療癒之書，提醒讀者正視內心的傷痕，並學習像貓一樣，溫柔地對待自己。"
  },
  {
    "handle": "prod_0017",
    "name": "貓貓書（黑橘貓）แมวตื่นสายมักจะโดนแมวตื่นเช้าคิดถึงก่อนเสมอ \n晚起的貓，通常總是被早起的貓提早想念。",
    "description": "",
    "instock_price": 430,
    "book_type": "泰語短篇書籍",
    "image_url_cover": "https://drive.google.com/file/d/1ehptgRwiX3_70PzrDc2JJrBGaZwt-QEg/view?usp=drive_link",
    "image_url_1": "https://drive.google.com/file/d/170tdhe2n65JtzHpejN3COQdxUH0i28no/view?usp=drive_link",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "泰",
    "ai_notes": "這本書的副標題是「關於貓、咖啡和你的對話」。內容圍繞著日常生活中的愜意片刻，探討人與人之間不對等的關懷與思念。書名比喻在一段關係中，總有一方是比較主動、先付出關心的「早起的貓」，而另一方則是比較被動、悠閒的「晚起的貓」。儘管步調不同，但這份「先想到你」的心情，構成了關係中最溫暖的底色。書中充滿了對話體的短文，描寫了希望找到一個像「家」一樣安心的關係，可以在對方面前卸下所有防備，做最真實的自己。"
  },
  {
    "handle": "prod_0018",
    "name": "貓貓書（橘貓）แมวน่ารักมีเยอะแต่เชื่อเถอะแมวส้มดีที่สุดแล้ว \n可愛的貓有很多，但相信我吧! 橘貓最好了",
    "description": "",
    "instock_price": 420,
    "book_type": "泰語短篇書籍",
    "image_url_cover": "https://drive.google.com/file/d/1Sh8Z_LZx9zIfcLvp36rdloswCn1XuVXt/view?usp=drive_link",
    "image_url_1": "",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "泰",
    "ai_notes": "這是作者「貓咪系列」的最新作品，這次的主角是「橘貓」。在網路文化中，橘貓常被認為是特別淘氣、貪吃又可愛的存在。這本書透過與橘貓的互動，探討「偏愛」這個主題。即使世界上有許多「可愛的貓」（美好的選項），但總有那麼一個對你而言是「最棒的」（獨一無二的存在）。書的副標題是「關於那些不會只搔搔你下巴就轉身離開的人」，暗示了這本書也在探討如何尋找並珍惜一段穩定、不會輕易離去的關係。內容延續了作者一貫的風格，以幽默、溫暖的筆觸，描寫人貓之間（以及人與人之間）的深刻連結。"
  },
  {
    "handle": "prod_0019",
    "name": "หลงรักแมวนักเดินทาง\n愛上旅行貓",
    "description": "以貓去日本各個地方旅行為主題，喜歡日本文化的朋友，可以透過這本學習日本文的美食旅遊泰文。",
    "instock_price": 330,
    "book_type": "泰語短篇書籍",
    "image_url_cover": "https://drive.google.com/file/d/1QYJi1i3vA9yZTaO7G3Hc1IUQCkfC-klN/view?usp=drive_link",
    "image_url_1": "https://drive.google.com/file/d/1ZJ2S6XO0vmLG9qEjUNqE9NYFAucUWymf/view?usp=drive_link",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "泰",
    "ai_notes": ""
  },
  {
    "handle": "prod_0020",
    "name": "แล้วทำไมต้องใช้ชีวิตให้มันยาก\n為什麼要把人生搞得這麼難。",
    "description": "這系列的書有藝術字和一般字體參雜",
    "instock_price": 320,
    "book_type": "泰語短篇書籍",
    "image_url_cover": "https://drive.google.com/file/d/1BI3wPzmVH430cwKIS4ZxbjCSyIePvfXr/view?usp=drive_link",
    "image_url_1": "",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "泰",
    "ai_notes": "這本書的作者「คิดมาก (Kid-Mak)」是泰國知名的網路作家和思想家，以其精煉、直擊人心的文字而聞名。書名本身就是一個對讀者的提問，挑戰我們去思考：生活中遇到的許多困難和壓力，有多少是外界強加的，又有多少是我們自己選擇的？\n全書透過一篇篇短文，探討現代人常有的焦慮，例如：過度在乎他人眼光、追求不必要的完美、被社群媒體綁架、以及不斷內耗的「想太多」心態。它引導讀者學習簡化生活，放下不必要的執著，並從複雜的思緒中走出來，找到更輕鬆、更忠於自我的生活方式。"
  },
  {
    "handle": "prod_0021",
    "name": "ถ้าปัญหามันแก้ไม่ได้ ก็แค่คิดแบบแมว \n如果問題解決不了，就試著用貓貓的方式來思考。",
    "description": "",
    "instock_price": 320,
    "book_type": "泰語短篇書籍",
    "image_url_cover": "https://drive.google.com/file/d/17GM8-3wathORrJsTpMhHe55wk0m50iaN/view?usp=drive_link",
    "image_url_1": "https://drive.google.com/file/d/1FFWlrn4-nWrgIgshEFlCHWnRMtlRH147/view?usp=drive_link",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "泰",
    "ai_notes": "這本書專注於將「貓咪哲學」應用在處理問題上。它提出，當我們面對一個棘手的、似乎無法解決的難題時，與其鑽牛角尖，不如學學貓咪：暫時走開、去睡一覺、把注意力轉移到其他地方。有時候，放下執著，問題的答案反而會自己浮現，或者你會發現，那個問題根本沒有那麼重要。這是一本教你如何「策略性放棄」和「轉念」的書。"
  },
  {
    "handle": "prod_0022",
    "name": "ชีวิตดีขึ้นทันทีแค่คิดแบบแมว\n只要像貓一樣思考，生活立刻變好。",
    "description": "作者新作品",
    "instock_price": 340,
    "book_type": "",
    "image_url_cover": "https://drive.google.com/file/d/1xO-tfxGPDqTb1J6smfspXxrk16l_uDrT/view?usp=drive_link",
    "image_url_1": "",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "泰",
    "ai_notes": "這本書則是將「貓咪哲學」擴展到生活的各個層面，像一本更全面的生活風格指南。它涵蓋了工作、人際關係、自我照顧等多個方面，教導讀者如何運用貓咪的智慧來提升整體生活品質。例如：如何像貓一樣優雅地獨處、如何建立舒適的人際距離、如何在混亂中找到屬於自己的安靜角落。它向讀者展示，只要轉變思維模式，就能立即從日常的煩惱中解脫，讓生活變得更美好。"
  },
  {
    "handle": "prod_0023",
    "name": "泰國旅遊筆記本",
    "description": "",
    "instock_price": 260,
    "book_type": "文化小物",
    "image_url_cover": "https://drive.google.com/file/d/1OT7HKWnOPme3ByhUFzaqACHdCVrCAMPZ/view?usp=drive_link",
    "image_url_1": "https://drive.google.com/file/d/1r-brETgic3CFJFlPf2X-noWATUQUFAqM/view?usp=drive_link",
    "image_url_2": "https://drive.google.com/file/d/1WWYq0zTUaRgJlLFXKp9eK5HjxCPtmrCV/view?usp=drive_link",
    "is_bestseller": true,
    "specification": "",
    "ai_notes": ""
  },
  {
    "handle": "prod_0024",
    "name": "泰國地圖磁性板",
    "description": "",
    "instock_price": 620,
    "book_type": "文化小物",
    "image_url_cover": "https://drive.google.com/file/d/1WwSRJro0Uu7xRTPXZYMn89wJIJedq8zX/view?usp=drive_link",
    "image_url_1": "",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "20*30cm",
    "ai_notes": ""
  },
  {
    "handle": "prod_0025",
    "name": "泰國刮刮樂地圖",
    "description": "",
    "instock_price": 625,
    "book_type": "文化小物",
    "image_url_cover": "https://drive.google.com/file/d/1eqiyNZcgJEHYKzwpOWl1A_dO-b8yNiA6/view?usp=drive_link",
    "image_url_1": "",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "",
    "ai_notes": ""
  },
  {
    "handle": "prod_0026",
    "name": "微型泰式料理冬陰功款",
    "description": "",
    "instock_price": 90,
    "book_type": "文化小物",
    "image_url_cover": "https://drive.google.com/file/d/1EXoXOcVL1BDaVr3eI0oF7iGLB4qt7M4g/view?usp=drive_link",
    "image_url_1": "",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "含鑰匙圈",
    "ai_notes": ""
  },
  {
    "handle": "prod_0027",
    "name": "蛇牌涼感噴霧",
    "description": "",
    "instock_price": 250,
    "book_type": "文化小物",
    "image_url_cover": "https://drive.google.com/file/d/1ENbCLhWEYcmtT9m0leCHrC4XqsXHJdWl/view?usp=drive_link",
    "image_url_1": "",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "原味/薰衣草",
    "ai_notes": ""
  },
  {
    "handle": "prod_0028",
    "name": "合艾炸雞飯短袖",
    "description": "包裝會是包成合艾特色糯米炸雞飯的方式，還以為在吃糯米炸雞飯!",
    "instock_price": 640,
    "book_type": "文化服飾",
    "image_url_cover": "https://drive.google.com/file/d/1i12vhTugUY3LpTCXk10OhAeF8SHLMtGX/view?usp=drive_link",
    "image_url_1": "https://drive.google.com/file/d/1EDSNGOnyQcPsR9s0QURoE1JZdaGgg5HR/view?usp=drive_link",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "FreeSize/XL",
    "ai_notes": ""
  },
  {
    "handle": "prod_0029",
    "name": "合艾炸雞飯短褲",
    "description": "",
    "instock_price": 540,
    "book_type": "文化服飾",
    "image_url_cover": "https://drive.google.com/file/d/11hZcV_Z8NcOrSPpV9r1crlkoetYXljlo/view?usp=drive_link",
    "image_url_1": "",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "FreeSize",
    "ai_notes": ""
  },
  {
    "handle": "prod_0030",
    "name": "普吉島褲",
    "description": "訂購的店家每賣出一件就會捐9泰銖給Baan Ar-Jor Foundation 基金會，資助普吉島當地貧困兒童",
    "instock_price": 350,
    "book_type": "文化服飾",
    "image_url_cover": "https://drive.google.com/file/d/1hJZOnwfDIcKfpDj-magxDzbt791dZU-O/view?usp=drive_link",
    "image_url_1": "",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "FreeSize",
    "ai_notes": ""
  },
  {
    "handle": "prod_0031",
    "name": "柯叻府喵喵褲",
    "description": "",
    "instock_price": 360,
    "book_type": "文化服飾",
    "image_url_cover": "https://drive.google.com/file/d/1cCjihLNbhB9Wn42Qwakenikm1g__jiDt/view?usp=drive_link",
    "image_url_1": "",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "FreeSize",
    "ai_notes": ""
  },
  {
    "handle": "prod_0032",
    "name": "這是什麼巨蜥衣服",
    "description": "",
    "instock_price": 450,
    "book_type": "新貨",
    "image_url_cover": "https://drive.google.com/file/d/1W2GAlMOf1TFr1VIc5nw6fY87N5XZf7Hy/view?usp=drive_link",
    "image_url_1": "",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "M/L",
    "ai_notes": ""
  },
  {
    "handle": "prod_0033",
    "name": "PEK鼻通",
    "description": "",
    "instock_price": 100,
    "book_type": "新貨",
    "image_url_cover": "https://drive.google.com/file/d/1-ewRnFy9Q3blrSysKehxbkQsYv_IWQQh/view?usp=drive_link",
    "image_url_1": "",
    "image_url_2": "",
    "is_bestseller": false,
    "specification": "檸檬/西瓜",
    "ai_notes": ""
  },
  {
    "handle": "prod_0034",
    "name": "佛祖求救口哨",
    "description": "",
    "instock_price": 300,
    "book_type": "新貨",
    "image_url_cover": "https://drive.google.com/file/d/11xFtCILwZTWxibGo1RSzYFOLqG67y5U9/view?usp=drive_link",
    "image_url_1": "https://drive.google.com/file/d/1oAMZzKdvjEGHgyuYlyQPw2tX3FN5Rs2x/view?usp=drive_link",
    "image_url_2": "https://drive.google.com/file/d/1fmh43kR-xfFqhdcErNO6zYKJcqJEN9iU/view?usp=drive_link",
    "is_bestseller": false,
    "specification": "奶油色/粉色/橘色/紅色",
    "ai_notes": ""
  }
];

        // ===========================
        //      核心 JavaScript 邏輯
        // ===========================
        document.addEventListener('DOMContentLoaded', function() {
            
            // --- Google Drive 圖片連結轉換函式 ---
            function convertGoogleDriveUrl(url) {
                if (typeof url !== 'string' || !url.includes('drive.google.com')) {
                    // For invalid or non-Google Drive URLs, return a placeholder
                    return 'https://placehold.co/600x600/FAC191/592E3D?text=Image+Not+Found';
                }
                const regex = /drive\.google\.com\/file\/d\/([a-zA-Z0-9_-]+)/;
                const match = url.match(regex);
                if (match && match[1]) {
                    const fileId = match[1];
                    // Use the more reliable lh3.googleusercontent.com domain for direct image access
                    return `https://lh3.googleusercontent.com/d/${fileId}`;
                }
                // If regex doesn't match (e.g., folder link), return a placeholder
                return 'https://placehold.co/600x600/FAC191/592E3D?text=Invalid+Link';
            }
            
            const mainContent = document.getElementById('main-content');
            const pages = document.querySelectorAll('.page');
            const navLinks = document.querySelectorAll('.nav-link');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const modal = document.getElementById('image-modal');
            const modalImage = document.getElementById('modal-image');
            const closeModalButton = document.getElementById('close-modal');


            // --- 產品渲染邏輯 (全新排版) ---
            function renderProducts(filter = 'all') {
                const container = document.getElementById('all-products-container');
                const featuredContainer = document.getElementById('featured-products-container');
                if (!container) return;
                
                let filteredProducts = products;
                if (filter === 'bestseller') {
                    filteredProducts = products.filter(p => p.is_bestseller);
                } else if (filter !== 'all') {
                    filteredProducts = products.filter(p => p.book_type === filter);
                }

                container.innerHTML = ''; // 清空容器

                filteredProducts.forEach(product => {
                    container.innerHTML += createProductCard(product);
                });
                
                // Also update featured products if on home page
                if (featuredContainer) {
                    const featured = products.filter(p => p.is_bestseller).slice(0, 4);
                    featuredContainer.innerHTML = '';
                    featured.forEach(product => {
                         featuredContainer.innerHTML += createProductCard(product);
                    });
                }
            }
            
            function createProductCard(product) {
                const priceToShow = product.instock_price > 0 ? product.instock_price : product.price;
                const priceHtml = priceToShow > 0 ? `NT$ ${Math.round(priceToShow)}` : '價格洽詢';
                
                const bestsellerBadge = product.is_bestseller ? 
                    `<div class="absolute top-3 right-3 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full shadow-md">★ 熱銷</div>` : '';
                
                const imageUrl = convertGoogleDriveUrl(product.image_url_cover);
                
                // 產生規格標籤
                let tagsHtml = '';
                if (product.specification) {
                    const specs = product.specification.split('/');
                    specs.forEach(spec => {
                        if(spec.trim()){
                           tagsHtml += `<div class="bg-gray-200 text-gray-700 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded-full">${spec.trim()}</div>`;
                        }
                    });
                }
                
                // AI 介紹按鈕
                let aiButtonHtml = '';
                 if (product.ai_notes && product.ai_notes.trim().length > 10) {
                    aiButtonHtml = `<button class="text-xs font-semibold text-purple-600 hover:text-purple-800" onclick="toggleAiNotes(event, '${product.handle}')">◎ AI介紹(僅供參考)</button>`;
                }

                // 縮圖庫
                let thumbnailHtml = '';
                const imageUrl1 = product.image_url_1 ? convertGoogleDriveUrl(product.image_url_1) : '';
                const imageUrl2 = product.image_url_2 ? convertGoogleDriveUrl(product.image_url_2) : '';

                if(imageUrl1 && imageUrl1.startsWith('https')) {
                    thumbnailHtml += `<img src="${imageUrl1}" class="w-10 h-10 rounded-md object-cover border-2 border-gray-200 cursor-pointer" onclick="openModal(event, '${imageUrl1}')" loading="lazy">`;
                }
                 if(imageUrl2 && imageUrl2.startsWith('https')) {
                    thumbnailHtml += `<img src="${imageUrl2}" class="w-10 h-10 rounded-md object-cover border-2 border-gray-200 cursor-pointer" onclick="openModal(event, '${imageUrl2}')" loading="lazy">`;
                }

                return `
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden flex flex-col transition-shadow duration-300 hover:shadow-2xl">
                        <div class="relative">
                            <div class="aspect-square w-full overflow-hidden cursor-pointer" onclick="openModal(event, '${imageUrl}')">
                                <img src="${imageUrl}" alt="${product.name}" class="w-full h-full object-cover" loading="lazy" onerror="this.onerror=null;this.src='https://placehold.co/600x600/FAC191/592E3D?text=Image+Error';">
                            </div>
                            ${bestsellerBadge}
                        </div>
                        <div class="p-5 flex flex-col flex-grow">
                            <p class="text-sm font-semibold" style="color: #F2834D;">${product.book_type || '商品'}</p>
                            <div class="relative group">
                                <h3 class="text-xl font-bold mt-1 truncate">${product.name}</h3>
                                <div class="absolute bottom-full mb-2 w-max max-w-xs bg-[#592E3D] text-white text-sm rounded-md shadow-lg p-2 z-20 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none">
                                    ${product.name.replace(/\n/g, '<br>')}
                                </div>
                            </div>
                            <p class="text-2xl font-bold mt-2" style="color: #F0725C;">${priceHtml}</p>
                            <p class="text-sm text-gray-500 mt-2 flex-grow min-h-[40px]">${product.description || ''}</p>
                            <div class="mt-4 flex flex-wrap items-center gap-2">
                                ${tagsHtml}
                                ${aiButtonHtml}
                            </div>
                             <div class="ai-notes-content" id="ai-notes-${product.handle}">
                                <p class="text-xs text-gray-600 whitespace-pre-line">${product.ai_notes || ''}</p>
                            </div>
                            <div class="mt-auto pt-4 flex items-center gap-2">
                                ${thumbnailHtml}
                            </div>
                        </div>
                        <div class="p-4 bg-gray-50 mt-auto">
                            <a href="https://myship.7-11.com.tw/general/detail/GM2409123235798" target="_blank" class="block text-center w-full bg-[#F0725C] hover:bg-[#E0644C] text-white font-bold py-3 px-4 rounded-lg transition-colors">
                                前往賣貨便下訂
                            </a>
                        </div>
                    </div>
                `;
            }
            
            // --- AI 介紹切換 ---
            window.toggleAiNotes = function(event, handle) {
                event.stopPropagation();
                const content = document.getElementById(`ai-notes-${handle}`);
                content.classList.toggle('show');
            }
            
            // --- 圖片 Modal ---
            window.openModal = function(event, imageUrl) {
                event.stopPropagation();
                modalImage.src = imageUrl;
                modal.classList.remove('hidden');
                modal.classList.add('flex');
            }

            function closeModal() {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
                modalImage.src = '';
            }

            closeModalButton.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });


            // --- 頁面切換邏輯 ---
            function switchPage(targetId) {
                if (targetId === 'home') {
                    document.getElementById('home').classList.add('active');
                    document.getElementById('all-products').classList.remove('active');
                    document.getElementById('courses').classList.remove('active');
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                } else {
                    document.getElementById('home').classList.remove('active');
                    pages.forEach(page => {
                        page.classList.toggle('active', page.id === targetId);
                    });
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
                mobileMenu.classList.add('hidden');
            }
            
            // --- 事件監聽 ---
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.dataset.target;
                    switchPage(targetId);
                });
            });

            mobileMenuButton.addEventListener('click', function() {
                mobileMenu.classList.toggle('hidden');
            });
            
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    if (href.length > 1 && document.querySelector(href)) {
                        e.preventDefault();
                        document.querySelector(href).scrollIntoView({ behavior: 'smooth' });
                        if (!mobileMenu.classList.contains('hidden')) {
                             mobileMenu.classList.add('hidden');
                        }
                    }
                });
            });
            
            // --- 篩選按鈕邏輯 ---
            function setupFilters() {
                const filterContainer = document.getElementById('filter-container');
                const categories = ['all', 'bestseller', ...new Set(products.map(p => p.book_type).filter(Boolean))];
                
                filterContainer.innerHTML = categories.map(cat => {
                    let text, styleClass;
                    if(cat === 'all') {
                        text = '全部商品';
                        styleClass = 'bg-[#F0725C] text-white border-transparent';
                    } else if (cat === 'bestseller') {
                        text = '★ 熱銷推薦';
                        styleClass = 'bg-white text-[#F0725C] border-[#F0725C]';
                    } else {
                        text = cat;
                        styleClass = 'bg-white text-gray-700 border-gray-300';
                    }
                    return `<button class="filter-btn px-4 py-2 rounded-full text-sm font-semibold border transition-colors duration-300 ${styleClass}" data-filter="${cat}">${text}</button>`;
                }).join('');

                filterContainer.addEventListener('click', (e) => {
                    if (e.target.classList.contains('filter-btn')) {
                        // Update active styles
                        filterContainer.querySelectorAll('.filter-btn').forEach(btn => {
                            btn.classList.remove('bg-[#F0725C]', 'text-white', 'border-transparent');
                            if(btn.dataset.filter === 'bestseller') {
                                btn.classList.add('bg-white', 'text-[#F0725C]', 'border-[#F0725C]');
                            } else {
                                btn.classList.add('bg-white', 'text-gray-700', 'border-gray-300');
                            }
                        });
                        e.target.classList.add('bg-[#F0725C]', 'text-white', 'border-transparent');
                        e.target.classList.remove('bg-white', 'text-gray-700', 'border-gray-300', 'text-[#F0725C]', 'border-[#F0725C]');

                        renderProducts(e.target.dataset.filter);
                    }
                });
            }


            // --- 初始渲染 ---
            setupFilters();
            renderProducts('all');
        });
    </script>
</body>
</html>
